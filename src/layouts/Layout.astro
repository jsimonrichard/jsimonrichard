---
import '../global.css';
import '@fontsource/merriweather/400.css';
import '@fontsource/merriweather/700.css';
import '@fontsource/source-sans-pro/400.css';
import '@fontsource/source-sans-pro/700.css';
import '@fontsource-variable/jetbrains-mono';
import PostHog from '../components/posthog.astro';
import ThemeHeadScript from '../components/theme-head-script.astro';
import ThemeDropdown from '../components/theme-dropdown';
import SocialIcons from '../components/SocialIcons.astro';

interface Props {
  title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="J. Simon Richard's Personal Website" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
    <ThemeHeadScript />
    <PostHog />
  </head>
  <body class="bg-background">
    <nav
      class="bg-background fixed top-0 left-0 right-0 z-50 shadow-md dark:shadow-gray-900"
    >
      <div
        class="max-w-7xl flex flex-col items-stretch md:flex-row md:items-center justify-between mx-auto p-4 gap-8"
      >
        <div class="flex flex-row items-center">
          <a href="/" data-astro-prefetch>
            <h1 class="text-2xl font-bold">J. Simon Richard</h1>
          </a>
          <div class="flex-1"></div>
          <input class="hidden" id="nav-toggle" type="checkbox" />
          <label class="md:hidden cursor-pointer" for="nav-toggle">
            <span class="hamb-line">
              <span class="sr-only">Toggle main menu</span>
              <svg
                class="w-5 h-5"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 17 14"
              >
                <path
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M1 1h15M1 7h15M1 13h15"></path>
              </svg>
            </span>
          </label>
        </div>

        <div
          class="w-full flex-1 hidden nav-menu md:flex md:w-auto flex-row items-center"
        >
          <a href="/blog" class="text-lg hover:underline" data-astro-prefetch
            >Blog</a
          >
          <div class="flex-1"></div>
          <div class="flex flex-row gap-4 mr-4 items-center">
            <ThemeDropdown client:only="react" />
            <div class="h-6 w-px bg-border mr-2"></div>
            <SocialIcons />
          </div>
        </div>
      </div>
    </nav>

    <slot />

    <footer class="bg-secondary dark:bg-card">
      <div class="text-center p-4">
        Copywrite Â© {new Date().getFullYear()} J. Simon Richard
      </div>
    </footer>

    <style is:global>
      html,
      body {
        font-family:
          Source Sans Pro,
          system-ui,
          sans-serif;
        font-size: 13pt;
        width: 100wh;
      }
      code {
        font-family:
          JetBrains Mono,
          Menlo,
          Monaco,
          Lucida Console,
          Liberation Mono,
          DejaVu Sans Mono,
          Bitstream Vera Sans Mono,
          Courier New,
          monospace;
      }
      h1,
      h2,
      h3 {
        font-family: Merriweather, serif;
      }
    </style>

    <script>
      document.getElementById('nav-toggle')!.addEventListener('change', () => {
        document.querySelector('.nav-menu')!.classList.toggle('hidden');
        document.querySelector('.nav-menu')!.classList.toggle('flex');
      });
    </script>
  </body>
</html>
